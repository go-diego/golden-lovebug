<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>{{page.title}} | Writing Behind-the-Scenes</title>
    <meta property="fb:app_id" content="{{site.data.metadata.facebookAppId}}">
    <meta name="description" content="{{page.excerpt | strip_html}}" />
    <meta property="og:type" content="article">
    <meta property="og:description" content="{{page.excerpt | strip_html | strip_newlines}}" />
    <meta property="og:title" content="{{page.title}} | Writing Behind-the-Scenes" />
    <meta property="og:url" content="{{page.url | absolute_url}}" />
    <meta property="og:image" content="{% if page.image %} {{page.image | absolute_url}} {%else%} {{site.data.metadata.image | absolute_url}} {% endif %}" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="{{page.title}} | Writing Behind-the-Scenes" />
    <meta name="twitter:description" content="{{page.excerpt | strip_html}}" />
    <meta name="twitter:image" content="{% if page.image %} {{page.image | absolute_url}} {%else%} {{site.data.metadata.image | absolute_url}} {% endif %}" />
    <meta name="twitter:url" content="{{page.url | absolute_url}}" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="{{site.data.metadata.favicon | absolute_url}}" />
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:500,400italic,100,300,700,100italic,300italic,400" rel="stylesheet"
        type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Caveat" rel="stylesheet">
    <link href="{{'feed.xml' | absolute_url}}" type="application/rss+xml" rel="alternate" title="Latest 10 blog posts" />
    <base href="{{'../../../blog' | absolute_url}}" />
</head>

<body>
    {% include nav-default.html %}
    <main class="container pt-5 mt-5">
        <div class="row">
            <div class="col-md-8 blog-main pb-5">
                <h1 class="text-center">{{page.title}}</h1>
                <div class="header-underline center mb-4"></div>
                <h2 class="h6 text-muted pb-2 text-capitalize">{{page.date | date_to_string}}</h2>
                <div class="pb-3">
                    {% include share-buttons.html %}
                </div>
                <div class="text-justify pb-5 blog-content">
                    {{content | markdownify | smartify}}
                </div>
            </div>
            <aside class="col-md-4 blog-sidebar pb-5">
                {% assign currentMonthYear = site.time | date: '%b %Y' %}
                {% assign recentPostsArr = "" | split: ',' %}
                {% assign archivedPostsArr = "" | split: ',' %}
                {% for post in site.posts %}
                {% assign postMonthYear = post.date | date: '%b %Y' %}
                {% if postMonthYear == currentMonthYear %}
                {% assign recentPostsArr = recentPostsArr | push: post %}
                {% else %}
                {% assign archivedPostsArr = archivedPostsArr | push: post %}
                {% endif %}
                {% endfor %}

                {% if recentPostsArr.size > 0 %}
                <h3 class="h4 text-capitalize">Recent Posts</h3>
                {% endif %}
                <ul class="list-unstyled mb-0">
                    {% for post in recentPostsArr %}
                    <li class="post{% if page.url contains post.url %} active {% endif %}">
                        {% if forloop.first %} <i class="fas fa-star text-primary"></i> {% endif %}
                        <a class="text-muted" href="{{ post.url }}">{{ post.title }}</a>
                    </li>
                    {% endfor %}
                </ul>

                {% if archivedPostsArr.size > 0 %}
                    <h3 class="h4 text-capitalize mt-5">Archive</h3>
                {% endif %} 
                {% for post in archivedPostsArr %} 
                {% assign currentdate = post.date | date: "%b %Y" %} 
                {%if currentdate != date %} 
                {% unless forloop.first %}</ul>{% endunless %}
                <h5 class="text-capitalize h6 mt-1 mb-0" id="y{{post.date | date: " %b%Y "}}">{{ currentdate }}</h5>
                <ul class="list-unstyled">
                    {% assign date = currentdate %} {% endif %}
                    <li class="post {% if page.url contains post.url %}active{% endif %}">
                        <a class="text-muted" href="{{ post.url }}">{{ post.title }}</a>
                    </li>
                    {% if forloop.last %}</ul>{% endif %} {% endfor %}
            </aside>
        </div>
    </main>
    {% include footer.html %}
    {% include scripts.html %}
</body>

</html>